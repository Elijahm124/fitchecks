{% extends 'fits/base.html' %}

{% block content %}


    <p>{{ owner.username }}'s Closets</p><br>
    <p>{{ owner.profile.bio }}</p>
    <img src="{{ owner.profile.country.flag}}" alt="{{ owner.profile.country.alpha3 }}">
    <img
                src="{{ owner.profile.get_profile_pic_url }}" class="rounded-circle" alt="img"
            >


    {% if not same %}
        <!--console.log("not same")-->
            <div class="col-4">
                    <button class="btn btn-white fun" style="display:inline" id="{{ owner.id }}">
                        <input type="hidden" name="{{ owner }}" value="{{ owner }}" class="{{ owner }}">
                    {% if is_following and user.is_authenticated %}
                        <a href="{% url 'fits:fun' %}" class="funbtn{{ owner.id }}">Unfollow</a>
                    {% elif not is_following and user.is_authenticated %}
                        <a href="{% url 'fits:fun' %}" class="funbtn{{ owner.id }} {{ owner.id }}">Follow</a>
                    {% endif %}
                    </button>
                </div>
    {% else %}
        <button type="button">
        <a href="{% url 'users:edit_profile' owner %}">Edit Profile</a>
        </button>
        <button type="button">
        <a href="{% url 'users:delete_profile' owner %}">Delete Profile</a>
        </button>
    {% endif %}
    <ul>
    {% for closet in closets %}
        <li>
            <a href="{% url 'fits:single_closet' closet.owner closet.style %}">
                {{ closet.style }}
                </a>
        </li>
    {% empty %}
        <li>There are no fits for {{ closet.owner }}'s closet {{ closet }} yet</li>
    {% endfor %}
    </ul>

{% endblock content %}

{% block jsfiles %}

    <script>
        $(document).on('click', '.fun', function (e) {

            var id = this.id;
            var href = $(".fun").find("a").attr("href");


            e.preventDefault();


            $.ajax({
                url: href,
                data: {
                    "funId": id,
                },
                success: function (response) {
                    if (response.is_following) {
                        $('.funbtn' + id).html("Unfollow")
                          }




                    else {
                        $('.funbtn' + id).html("Follow")
                          }

                },
            });
        });

</script>


{% endblock jsfiles %}